{"version":3,"file":"static/webpack/static\\development\\pages\\product\\[url_key].js.4779b7fd17d11db30db4.hot-update.js","sources":["webpack:///./pages/product/[url_key].js"],"sourcesContent":["import Layout from \"../../components/Layout\";\r\nimport { withApollo } from \"../../lib/apollo\";\r\nimport { withRedux } from \"../../lib/redux\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport { PRODUCT_BY_KEY } from \"../../data/product\";\r\nimport Price from \"../../components/Price\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addToCart } from '../../redux/action/actionCart';\r\nimport { compose } from \"redux\";\r\nimport { Grid, TextField, Paper, Button, CircularProgress } from \"@material-ui/core\";\r\n\r\n\r\nconst Product = () => {\r\n  const pageConfig = {\r\n    title: \"PDP\",\r\n  };\r\n  const [qty=1, setQty] = useState();\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n  const { url_key } = router.query;\r\n  const { loading, data } = useQuery(PRODUCT_BY_KEY, {\r\n    variables: {\r\n      url_key: url_key,\r\n    },\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading\">Wait ...</div>\r\n    );\r\n  }\r\n\r\n  const handleQty = (e) => {\r\n      setQty(e.target.value)\r\n  }\r\n\r\n  const handleAddtoCart = (e) => {\r\n      e.preventDefault();\r\n\r\n      const item = {\r\n        id: product.id,\r\n        qty: parseInt(qty),\r\n        product: {\r\n            name: product.name,\r\n            image: <img src={product.image.url} alt={product.image.label} />,\r\n            price: <Price price={product.price_range.minimum_price}/>,\r\n            sku: product.sku\r\n        }\r\n      }\r\n\r\n      dispatch(addToCart(item))\r\n  }\r\n\r\n  const product = data.products.items[0];\r\n  pageConfig.title = product.name;\r\n\r\n  return (\r\n    <Layout pageConfig={pageConfig}>\r\n      {(loading)?<CircularProgress />:\r\n      <Grid container spacing={3}>\r\n        <Grid item sm={5}>\r\n          <section className=\"section product-image\">\r\n              <img src={product.image.url} alt={product.image.label} />\r\n          </section>\r\n        </Grid> \r\n        <Grid item sm={7}>\r\n          <div className={classes.productInfo}>\r\n            <section className=\"section product-info\">\r\n              <h1>{product.name}</h1>\r\n              <Price price={product.price_range.minimum_price} />\r\n            </section>\r\n            <section className={`section ${classes.formAddToCart}`}>\r\n                <form id={`add-to-cart-${product.id}`} onSubmit={handleAddtoCart}>\r\n                    <TextField required label=\"Quantity\" defaultValue={qty} id=\"qty\" onChange={handleQty} />\r\n                    <Button variant=\"contained\" type=\"submit\"> Add to Cart</Button>\r\n                </form>\r\n            </section>\r\n            <section className=\"section product-description\">\r\n              <h4>Description</h4>\r\n              <div className={classes.description} dangerouslySetInnerHTML={{__html: product.description.html}}></div>\r\n            </section>\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n      }\r\n    </Layout>\r\n  )\r\n};\r\n\r\nexport default compose(withApollo, withRedux)(Product);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AADA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AANA;AACA;AADA;AASA;AACA;AADA;AADA;AARA;AAAA;AACA;AAaA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAJA;AAHA;AAWA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;;;;A","sourceRoot":""}